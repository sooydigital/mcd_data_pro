from myapp.models import PuestoVotacion, VotantePuestoVotacion, Votante
from django.core.management.base import BaseCommand

DOCUMENTS_TO_KEEP = [
    '1005333502',
    '1005110246',
    '1098672400',
    '1098654134',
    '91279043',
    '91242738',
    '37842332',
    '1098642835',
    '91500114',
    '1098618745',
    '1098720807',
    '1045684144',
    '37825105',
    '28148730',
    '63502235',
    '1095818253',
    '1098733465',
    '91214224',
    '1095798167',
    '1098663794',
    '1098635384',
    '13510555',
    '63548729',
    '13825419',
    '13835757',
    '91228174',
    '1005186696',
    '91215130',
    '1098784182',
    '63480964',
    '1095841566',
    '1098802267',
    '1095825215',
    '63526497',
    '1095951833',
    '91518866',
    '91536688',
    '63528096',
    '91491703',
    '1098793259',
    '1098678581',
    '1098602268',
    '1095933743',
    '1122117941',
    '1098648554',
    '1022363696',
    '1005156420',
    '1098070553',
    '91239127',
    '37557649',
    '91229957',
    '13824433',
    '63347320',
    '1005235540',
    '1099735507',
    '1098691076',
    '13847175',
    '91519957',
    '63303298',
    '13512246',
    '13742125',
    '91235973',
    '63498793',
    '13746980',
    '1098652905',
    '1098628676',
    '8762269',
    '63357335',
    '63499447',
    '1005136357',
    '37745175',
    '91245338',
    '1135254073',
    '91494573',
    '63536032',
    '1098799881',
    '91279141',
    '27988126',
    '63297729',
    '63274081',
    '1095791840',
    '1095830645',
    '91428820',
    '28334073',
    '91521131',
    '1098808683',
    '91266895',
    '1095799098',
    '1098807648',
    '5724972',
    '1098781732',
    '37843635',
    '1101695304',
    '63340345',
    '63512967',
    '63293745',
    '63323153',
    '63279364',
    '13872436',
    '63276032',
    '1098688675',
    '91295820',
    '63305189',
    '91225658',
    '91298081',
    '91480606',
    '1094272107',
    '1098625374',
    '51551248',
    '63338357',
    '91254662',
    '91527523',
    '91225952',
    '1102387130',
    '63314052',
    '91298191',
    '37749617',
    '1102353843',
    '1098708059',
    '1093911075',
    '37513443',
    '63306562',
    '63308446',
    '91207184',
    '80028142',
    '1098603445',
    '1098761337',
    '1100962354',
    '37949383',
    '1095834718',
    '37724486',
    '37557813',
    '63308056',
    '1065239718',
]


class Command(BaseCommand):

    def handle(self, *args, **options):
        votantes = Votante.objects.all()
        for votante in votantes:
            document = str(votante.document_id)
            print("processing cc: {} ".format(document))
            if document not in DOCUMENTS_TO_KEEP:
                profile = votante.votanteprofile_set.first()
                if profile:
                    profile.delete()
                puesto = votante.votantepuestovotacion_set.first()
                if puesto:
                    puesto.delete()
                note = votante.votantemessage_set
                if note:
                    note.delete()
                sub_votante = votante.votante_set.all()
                for s in sub_votante:
                    s.lider = None
                    s.save()
                votante.delete()
            # else:
                # votante.is_active = True

            # votante.save()
