{% extends 'base.html' %}
{% load static %} {% load permissions_tags %}
{% block title %}
Editar Perfil | MCD
{% endblock %}

{% block headcontent %}
<script src='https://cdnjs.cloudflare.com/ajax/libs/d3/3.5.17/d3.min.js'></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.1/jquery.min.js"></script>

{% endblock %}
{% block content %}

<!-- Modal -->
<div class="card">
    <div class="card card-header p-2 principal_color">
        <h2 class="text-center card-title">
            {% if custom_name %}
                {{custom_name}}
            {% else %}
                Editar Votante

            {% endif %}
        </h2>
    </div>
    <form method="POST" class="card card-body">
        {% csrf_token %}

        <div class="row">
            <div class="col-sm-10 my-2"></div>
            
            <div class="col-sm-2 my-2">
                <a href="{% url 'app:eliminar_votante' document_id %}" class="btn btn-danger">
                    <b> Eliminar</b>
                </a>
            </div>

        </div>

        <div class="row g-6 my-4">
            <div class="row md-n3">
                <div class="col col-6 my-2">
                    <label for="inputAddress " class="form-label">Cédula</label>
                    <input required type="number" class="form-control " placeholder="Cédula" id='input_document_id'
                        name="document_id" value={{document_id}} disabled>
                </div>
            </div>

            <div class="col-sm-6 my-2">
                <label for="inputAddress" class="form-label">Nombre</label>
                <input required type="text" class="form-control" placeholder="Nombre" name="first_name" value="{{first_name}}">
            </div>
            <div class="col-sm-6 my-2">
                <label for="inputAddress" class="form-label">Apellido</label>
                <input required type="text" class="form-control" placeholder="Apellido" name="last_name" value="{{last_name}}">
            </div>

            
            
            <div class="row">

                <div class="col-sm-6 my-4">
                    <label for="inputAddress" class="form-label">WhatsApp </label>
                    <div class="input-group has-validation">
                        <span class="input-group-text wpp"><i class="fa fa-whatsapp"></i></span>
                        <input required type="number" class="form-control" placeholder="WhatsApp" name="mobile_phone" value="{{mobile_phone}}">
                    </div>
                </div>
                
                <div class="col-sm-6">
                    <label for="" class="form-label mx-2">Fecha de nacimiento</label>
                    <div class="input-group">
                        <div class="col-sm-3 mx-2">
                            <label for="day" class="form-label">Día</label>
                            <select name="day" class="form-control" id="day">
                                <option value={{day.value}}>{{day.text}}</option>
                                {% for day in days %}
                                    <option value="{{day}}">{{day}}</option>
                                {% endfor %}
                            </select>
                        </div>
            
                        <div class="col-sm-3 mx-2">
                            <label for="month" class="form-label">Mes</label>
                            <select name="month" class="form-control" id="month">
                                <option value={{month.value}}>{{month.text}}</option>
                                {% for value,month in months %}
                                    <option value="{{value}}">{{month}}</option>
                                {% endfor %}
                            </select>
                        </div>
            
                        <div class="col-sm-3 mx-2">
                            <label for="year" class="form-label">Año</label>
                            <select name="year" class="form-control" id="year">
                                <option value={{year.value}}>{{year.text}}</option>
                                {% for year in years %}
                                    <option value="{{year}}">{{year}}</option>
                                {% endfor %}
                            </select>
                        </div>
                    </div>
                </div>
            </div>

            <div class="col-sm-6 my-2">
                <label for="gender" class="form-label">Sexo</label>
                <select required class="form-select" aria-label="Default select example" name="gender" id="gender">
                    <option value={{gender}}>{{gender}}</option>
                    <option value="MASCULINO">Masculino</option>
                    <option value="FEMENINO">Femenino</option>
                    <option value="OTRO">Otro</option>
                </select>
            </div>

            <div class="col-sm-6 my-2">
                <label for="inputAddress" class="form-label">Municipio</label>
                <input type="text" class="form-control" id='select_municipio' name="municipio" placeholder="Municipio" value="{{municipio}}">
            </div>

            <div class="col-sm-6 my-2">
                <label for="inputAddress" class="form-label">Barrio</label>
                <input type="text" class="form-control" id='select_barrio' name="barrio" placeholder="Igresa el nombre de tu barrio" value="{{barrio}}">
            </div>

            <div class="col-sm-6 my-2">
                <label for="inputAddress" class="form-label">Dirección</label>  
                <input required type="text" class="form-control" placeholder="Calle 12b #21-21" name="address" value="{{address}}">
            </div>

            {% if request.user|has_role:'SUPER_ADMIN' %}
                <div class="row">
                    <div class="col-sm-6 my-2">
                        <label for="etiqueta" class="form-label">Etiqueta</label>
                        <select required class="form-select" aria-label="Default select example" name="etiqueta" id="etiqueta">
                            <option value={{etiqueta}}>{{etiqueta}}</option>
                            <option value="LIDER">Líder</option>
                        </select>
                    </div>
        
                    {% if etiqueta == "LIDER" %}
                        <div class="col-sm-6 my-2">
                            <label for="link" class="form-label">Link personalizado</label>
                            <input type="text" class="form-control" id='link' name="link" placeholder="ej: 002" value="{{link}}">
                        </div>
                    {% else %}
                        <div class="col-sm-6 my-2">
                            <label for="link" class="form-label">Link personalizado</label>
                            <input type="text" class="form-control" id='link' name="link" placeholder="ej: 002" value="{{document_id}}">
                        </div>
                    {% endif %}

                </div>
            {% endif %}

            <div class="col-sm-6 my-2">
                <label for="lider" class="form-label">Lider</label>
                <input type="text" class="form-control" id='lider' name="lider" placeholder="Documento del lider" value="{{leader}}">
            </div>
            
            <div class="row my-3">
                <div class="form-check col-sm-2 my-2"></div>
                <div class="form-check col-sm-8 my-2">
                    <input class="form-check-input" type="checkbox" name="flexRadioDefault" id="flexCheckIndeterminate">
                    <label class="form-check-label" for="flexRadioDefault1">
                        En cumplimiento de las disposiciones de la Ley 1581 de 2012 que desarrolla el derecho de habeas data,
                        solicitamos su autorización para recopilar, almacenar, archivar, copiar, analizar, usar y consultar los
                        datos que se señalan a continuación.
                    </label>
                </div>
                <div class="form-check col-sm-2 my-2"></div>
            </div>

            <div class="d-flex justify-content-center my-5 ">
                <button id="enviar_form" type="submit" class="btn btn-success">Guardar</button>
            </div>

            
        </div>

    </form>
</div>
{% endblock %}